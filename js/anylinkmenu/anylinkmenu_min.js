if(typeof dd_domreadycheck=="undefined")var dd_domreadycheck=false var anylinkmenu={menusmap:{},preloadimages:[],effects:{delayhide:200,shadow:{enabled:true,opacity:0.3,depth:[5,5]},fade:{enabled:false,duration:500}},dimensions:{},getoffset:function(a,b){return(a.offsetParent)?a[b]+this.getoffset(a.offsetParent,b):a[b]},getoffsetof:function(a){a._offsets={left:this.getoffset(a,"offsetLeft"),top:this.getoffset(a,"offsetTop"),h:a.offsetHeight}},getdimensions:function(a){this.dimensions={anchorw:a.anchorobj.offsetWidth,anchorh:a.anchorobj.offsetHeight,docwidth:(window.innerWidth||this.standardbody.clientWidth)-20,docheight:(window.innerHeight||this.standardbody.clientHeight)-15,docscrollx:window.pageXOffset||this.standardbody.scrollLeft,docscrolly:window.pageYOffset||this.standardbody.scrollTop}if(!this.dimensions.dropmenuw){this.dimensions.dropmenuw=a.dropmenu.offsetWidth this.dimensions.dropmenuh=a.dropmenu.offsetHeight}},isContained:function(m,e){var e=window.event||e var c=e.relatedTarget||((e.type=="mouseover")?e.fromElement:e.toElement)while(c&&c!=m)try{c=c.parentNode}catch(e){c=m}if(c==m)return true else return false},setopacity:function(a,b){a.style.opacity=b if(typeof a.style.opacity!="string"){a.style.MozOpacity=b if(a.filters){a.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+b*100+")"}}},showmenu:function(a){var b=anylinkmenu.menusmap[a]clearTimeout(b.hidetimer)this.getoffsetof(b.anchorobj)this.getdimensions(b)var c=b.anchorobj._offsets.left+(b.orientation=="lr"?this.dimensions.anchorw:0)var d=b.anchorobj._offsets.top+this.dimensions.anchorh-(b.orientation=="lr"?this.dimensions.anchorh:0)if(c+this.dimensions.dropmenuw+this.effects.shadow.depth[0]>this.dimensions.docscrollx+this.dimensions.docwidth){c=c-this.dimensions.dropmenuw+(b.orientation=="lr"?-this.dimensions.anchorw:this.dimensions.anchorw)}if(d+this.dimensions.dropmenuh>this.dimensions.docscrolly+this.dimensions.docheight){d=Math.max(d-this.dimensions.dropmenuh-(b.orientation=="lr"?-this.dimensions.anchorh:this.dimensions.anchorh),this.dimensions.docscrolly)}if(this.effects.fade.enabled){this.setopacity(b.dropmenu,0)if(this.effects.shadow.enabled)this.setopacity(b.shadow,0)}b.dropmenu.setcss({left:c+'px',top:d+'px',visibility:'visible'})if(this.effects.shadow.enabled){b.shadow.setcss({left:c+anylinkmenu.effects.shadow.depth[0]+'px',top:d+anylinkmenu.effects.shadow.depth[1]+'px',visibility:'visible'})}if(this.effects.fade.enabled){clearInterval(b.animatetimer)b.curanimatedegree=0 b.starttime=new Date().getTime()b.animatetimer=setInterval(function(){anylinkmenu.revealmenu(a)},20)}},revealmenu:function(a){var b=anylinkmenu.menusmap[a]var c=new Date().getTime()-b.starttime if(c<this.effects.fade.duration){this.setopacity(b.dropmenu,b.curanimatedegree)if(this.effects.shadow.enabled)this.setopacity(b.shadow,b.curanimatedegree*this.effects.shadow.opacity)}else{clearInterval(b.animatetimer)this.setopacity(b.dropmenu,1)b.dropmenu.style.filter=""}b.curanimatedegree=(1-Math.cos((c/this.effects.fade.duration)*Math.PI))/2},setcss:function(a){for(prop in a){this.style[prop]=a[prop]}},setcssclass:function(a,b,c){var d=new RegExp("(^|\\s+)"+b+"($|\\s+)","ig")if(c=="check")return d.test(a.className)else if(c=="remove")a.className=a.className.replace(d,"")else if(c=="add"&&!d.test(a.className))a.className+=" "+b},hidemenu:function(a){var b=anylinkmenu.menusmap[a]clearInterval(b.animatetimer)b.dropmenu.setcss({visibility:'hidden',left:0,top:0})b.shadow.setcss({visibility:'hidden',left:0,top:0})},getElementsByClass:function(a){if(document.querySelectorAll)return document.querySelectorAll("."+a)else{var b=new RegExp("(^|\\s+)"+a+"($|\\s+)","i")var c=[]var d=document.all?document.all:document.getElementsByTagName("*")for(var i=0;i<d.length;i++){if(typeof d[i].className=="string"&&d[i].className.search(b)!=-1)c[c.length]=d[i]}return c}},addDiv:function(a,b,c){var d=document.createElement("div")if(a)d.id=a d.className=b if(c!=""&&typeof d.style.cssText=="string")d.style.cssText=c else if(c!="")d.setAttribute('style',c)document.body.appendChild(d)return d},getmenuHTML:function(a){var b=[]var c=""for(var i=0;i<a.items.length;i++){c+='<li><a href="'+a.items[i][1]+'" target="'+a.linktarget+'">'+a.items[i][0]+'</a></li>\n'if(a.items[i][2]=="efc"||i==a.items.length-1){b.push(c)c=""}}if(typeof a.cols=="undefined")return'<ul>\n'+b.join('')+'\n</ul>'else{c=""for(var i=0;i<b.length;i++){c+='<div class="'+a.cols.divclass+'" style="'+a.cols.inlinestyle+'">\n<ul>\n'+b[i]+'</ul>\n</div>\n'}return c}},addEvent:function(a,b,c){if(a.length>0){var d=a.shift()if(d.addEventListener)d.addEventListener(c,b,false)else if(d.attachEvent)d.attachEvent('on'+c,function(){return b.call(d,window.event)})this.addEvent(a,b,c)}},domready:function(a){if(dd_domreadycheck){a()return}if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false)a();dd_domreadycheck=true},false)}else if(document.attachEvent){if(document.documentElement.doScroll&&window==window.top)(function(){if(dd_domreadycheck)return try{document.documentElement.doScroll("left")}catch(error){setTimeout(arguments.callee,0)return}a();dd_domreadycheck=true})()}if(document.attachEvent&&parent.length>0)this.addEvent([window],function(){a()},"load")},addState:function(a,b){if(a.getAttribute('data-image')){var c=(a.tagName=="IMG")?a:a.getElementsByTagName('img')[0]if(c){c.src=(b=="add")?a.getAttribute('data-overimage'):a.getAttribute('data-image')}}else anylinkmenu.setcssclass(a,"selectedanchor",b)},addState:function(a,b){if(a.getAttribute('data-image')){var c=(a.tagName=="IMG")?a:a.getElementsByTagName('img')[0]if(c){c.src=(b=="add")?a.getAttribute('data-overimage'):a.getAttribute('data-image')}}else anylinkmenu.setcssclass(a,"selectedanchor",b)},setupmenu:function(b,c,d){this.standardbody=(document.compatMode=="CSS1Compat")?document.documentElement:document.body var f=c.getAttribute("rel")dropmenuid=f.replace(/\[(\w+)\]/,'')var g=window[dropmenuid]var h=this.addDiv(null,g.divclass,g.inlinestyle)h.innerHTML=this.getmenuHTML(g)var i=this.menusmap[b+d]={id:b+d,anchorobj:c,dropmenu:h,revealtype:(f.length!=dropmenuid.length&&RegExp.$1=="click")?"click":"mouseover",orientation:c.getAttribute("rev")=="lr"?"lr":"ud",shadow:this.addDiv(null,"anylinkshadow",null)}i.anchorobj._internalID=b+d i.anchorobj._isanchor=true i.dropmenu._internalID=b+d i.shadow._internalID=b+d i.dropmenu.setcss=this.setcss i.shadow.setcss=this.setcss i.shadow.setcss({width:i.dropmenu.offsetWidth+"px",height:i.dropmenu.offsetHeight+"px"})this.setopacity(i.shadow,this.effects.shadow.opacity)this.addEvent([i.anchorobj,i.dropmenu,i.shadow],function(e){var a=anylinkmenu.menusmap[this._internalID]if(this._isanchor&&a.revealtype=="mouseover"&&!anylinkmenu.isContained(this,e)){anylinkmenu.showmenu(a.id)anylinkmenu.addState(this,"add")}else if(typeof this._isanchor=="undefined"){clearTimeout(a.hidetimer)}},"mouseover")this.addEvent([i.anchorobj,i.dropmenu,i.shadow],function(e){if(!anylinkmenu.isContained(this,e)){var a=anylinkmenu.menusmap[this._internalID]a.hidetimer=setTimeout(function(){anylinkmenu.addState(a.anchorobj,"remove")anylinkmenu.hidemenu(a.id)},anylinkmenu.effects.delayhide)}},"mouseout")this.addEvent([i.anchorobj,i.dropmenu],function(e){var a=anylinkmenu.menusmap[this._internalID]if(this._isanchor&&a.revealtype=="click"){if(a.dropmenu.style.visibility=="visible")anylinkmenu.hidemenu(a.id)else{anylinkmenu.addState(this,"add")anylinkmenu.showmenu(a.id)}if(e.preventDefault)e.preventDefault()return false}else a.hidetimer=setTimeout(function(){anylinkmenu.hidemenu(a.id)},anylinkmenu.effects.delayhide)},"click")},init:function(a){this.domready(function(){anylinkmenu.trueinit(a)})},trueinit:function(a){var b=this.getElementsByClass(a)var c=this.preloadimages for(var i=0;i<b.length;i++){if(b[i].getAttribute('data-image')){c[c.length]=new Image()c[c.length-1].src=b[i].getAttribute('data-image')}if(b[i].getAttribute('data-overimage')){c[c.length]=new Image()c[c.length-1].src=b[i].getAttribute('data-overimage')}this.setupmenu(a,b[i],i)}}}